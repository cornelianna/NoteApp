@model List<NoteApp.Models.Post>

<h2>Feed</h2>
@foreach (var post in Model)
{
    <div class="post">
        <h3>@post.Username</h3>
        <p>@post.Content</p>
        @if (!string.IsNullOrEmpty(post.ImageUrl))
        {
            <img src="@post.ImageUrl" alt="Image" width="200" />
        }

        <!-- Display Edit/Delete buttons only for the user who created the post -->
        @if (User.Identity.Name == post.Username)
        {
            <a asp-action="EditPost" asp-route-id="@post.Id" class="btn btn-primary">Edit</a>
            <form asp-action="DeletePost" asp-route-id="@post.Id" method="post" style="display:inline;">
                <button type="submit" class="btn btn-danger">Delete</button>
            </form>
        }

        <!-- Comment Form -->
        <form asp-action="AddComment" method="post">
            <input type="hidden" name="postId" value="@post.Id" />
            <textarea name="Content" placeholder="Add a comment"></textarea>
            <input type="submit" value="Comment" />
        </form>

        <!-- Comments Section -->
        <h4>Comments:</h4>
        @foreach (var comment in post.Comments)
        {
            <p><strong>@comment.Username</strong>: @comment.Content</p>

            <!-- Display Edit/Delete buttons for comments if the user created them -->
            @if (User.Identity.Name == comment.Username)
            {
                <a asp-action="EditComment" asp-route-id="@comment.Id" class="btn btn-primary">Edit</a>
                <form asp-action="DeleteComment" asp-route-id="@comment.Id" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            }
        }
    </div>
}
